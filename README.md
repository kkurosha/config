# config
### Туляшева Арина ИКБО-42-23

## Задание 1
Эмулятор командной строки написан на Python и имитирует работу стандартной оболочки Unix-подобных операционных систем. Эмулятор поддерживает базовые команды и позволяет работать с виртуальной файловой системой, хранящейся в архиве формата tar. Команды, поддерживаемые эмулятором: ls, cd, wc, rmdir, find, exit. Имеет свой GUI.

Программа запускается из реальной командной строки, принимает аргументы для указания пользователя и пути к архиву с файловой системой. По умолчанию в качестве имени пользователя используется arina, а путь к файловой системе - tar.tar.

**Поддерживаемые команды:**
-   *ls* - выводит содержимое текущей директории;
-   *cd* - позволяет перемещаться по каталогам;
-   *wc* - позволяет подсчитывать слова в текстовом файле;
-   *rmdir* - удаление папок;
-   *find* - для поиска файлов и каталогов;
-   *exit* - предназначена для завершения процесса командной оболочки.

**Старт проекта:**

Необходимо открыть нужную директорию и запустить main.py.
```
cd <имя_директории>
python main.py
```

**Примеры использования:**

Запуск скрипта start_script.txt.

![image](https://github.com/user-attachments/assets/c1154579-c7ef-4f96-b17b-faad4514dd26)


**Результаты тестирования:**

Для всех команд эмулятора написаны тесты с использованием библиотеки unittest. Для запуска тестов выполняется команда:
```
python -m unittest <название_файла>
```

Скриншот успешного выполнения тестов:

![image](https://github.com/user-attachments/assets/757099e7-7e4e-493c-a724-e3875b18355f)


## Задание 2

Необходимо разработать инструмент командной строки для визуализации графа зависимостей из Git-репозитория с использованием Graphviz. Граф должен отображать зависимости коммитов и результат визуализации должен быть сохранён в файл в формате PNG. В узлах графа содержатся сообщения. 

**Конфигурационный файл** имеет формат yaml и содержит:
- Путь к программе для визуализации графов;
- Путь к анализируемому репозиторию;
- Путь к файлу с изображением графа зависимостей.


Скриншот конфигурационного файла:

![image](https://github.com/user-attachments/assets/1ad3c7f3-7317-4d59-95d0-7049eebbaa4e)


**Функции:**

Метод `validate_config(self)`:

- Проверяет существование и корректность путей к репозиторию и инструменту Graphviz;
- Если путь к репозиторию не существует или это не Git-репозиторий, выбрасывает исключение;
- Если Graphviz не найден, также выбрасывает ошибку.

Метод `get_commit_dependencies(self)`:

- Выполняет команду git log --pretty=format:%H %P для получения информации о коммитах и их родителях;
- Каждую строку результата разбивает на коммиты и их родительские коммиты;
- Добавляет в список зависимостей для каждого коммита его родительские коммиты;
- Возвращает список зависимостей в виде: [(commit_hash, [parent_hashes]), ...].

Метод `build_graph(self)`:

- Создает объект графа с использованием graphviz.Digraph();
- Для каждого коммита и его родительских коммитов добавляются узлы и рёбра.

Метод `get_commit_message(self, commit)`:

- Выполняет команду git log -1 --pretty=%B <commit> для получения сообщения коммита;
- Возвращает сообщение коммита для отображения на графе.

Метод `visualize(self)`:

- Генерирует граф с помощью метода build_graph();
- Сохраняет граф в формате PNG с помощью метода graph.render() и сохраняет его по указанному пути output_path;
- После успешного сохранения выводится сообщение о том, что граф успешно сохранён.

**Старт проекта:**

Необходимо запустить этот скрипт в командной строке, передав путь к конфигурационному файлу:

```
python main.py config.yaml
```

**Пример использования:**

После запуска скрипта было создан граф зависимостей в формате PNG:

![image](https://github.com/user-attachments/assets/5c9f582f-d54c-4ebd-80d3-6b7b4c491761)


**Результаты тестирования:**

Для всех команд эмулятора написаны тесты с использованием библиотеки unittest. Для запуска тестов выполняется команда:
```
python -m unittest <название_файла>
```

Скриншот успешного выполнения тестов:

![image](https://github.com/user-attachments/assets/e18fa55f-307f-48c3-8660-d61b5a209ed7)


## Задание 3
Эта программа позволяет конвертировать файлы пользовательского формата конфигураций в формат YAML.

**Функции:**
- Трансляция конфигурационного языка в yaml;
- Вычисление константных выражений.

Для константных вычислений определены операции и функции:
- Сложение;
- min().

**Описание основных функций:**

Функция `parse_input(input_text)`: 
   - Удаляет комментарии из входного текста.
   - Делит текст на строки и обрабатывает каждую строку.
   - Если строка соответствует формату const, парсит значение и вычисляет его с помощью evaluate_expression.
   - Если строка содержит '=', парсит ключ и значение, добавляет их в словарь данных.
   - Если строка не соответствует ни одному формату, вызывает ошибку синтаксиса.

Функция `evaluate_expression(expression, context)`: 
   - Заменяет ссылки на константы (например, $a) на их значения из контекста.
   - Обрабатывает функции, такие как min().
   - Пытается вычислить выражение с помощью eval(), если это не удается, вызывает ошибку.

Функция `parse_value(value, context)`: 
   - Определяет, как парсить значения: строки, массивы, целые числа или переменные.
   - В случае массива вызывает функцию parse_array.

Функция `parse_array(value)`: 
   - Преобразует строку массива в список, разбив строку по запятым.

**Старт проекта:**

Программу можно запустить командой:
```
python main.py output.yaml < input1.txt
```
или 
```
python main.py output.yaml < input2.txt
```

**Результаты тестирования:**

Входные данные файла input1.txt:

![image](https://github.com/user-attachments/assets/9e02c5d8-4444-45d5-81d0-a241acb88aaf)

Выходные данные: 

![image](https://github.com/user-attachments/assets/0853bd5e-447d-41af-884d-9c5494e5d425)

Входные данные файла input2.txt:

![image](https://github.com/user-attachments/assets/df74cf5a-70f3-41cd-b7e6-60bb0774a09d)

Выходные данные: 

![image](https://github.com/user-attachments/assets/597e4faf-9948-46aa-a65d-2a5ebbadc7a0)


Были написаны тесты с использованием библиотеки unittest. Для запуска тестов выполняется команда:
```
python -m unittest <название_файла>
```

Скриншот успешного выполнения тестов:

![image](https://github.com/user-attachments/assets/d68cd431-c792-4e5a-8dc9-91fe45751f41)
